language: ruby
rvm:
  - 2.4.0
  - 2.3.3
  - 2.2.6
before_install:
  # Workaround for https://github.com/sickill/rainbow/issues/48
  - gem update --system
before_script:
  - bundle exec appraisal install --jobs=3
script:
  - bundle exec rubocop
  - bundle exec appraisal rails4_1 rake spec
  - bundle exec appraisal rails4_2 rake spec
  - bundle exec appraisal avro-salsify-fork rake spec
